@using KioskApp.Helpers;
@using QLite.DesignComponents;
@inject IConfiguration Configuration

@model DesPageData

@if (Model != null && Model.Comps != null)
{

    <div id="canvas-container"
     style="
        width: @(Model.Width ?? "100vw");
        height: @(Model.Height ?? "100vh");
        background-image: url('@(Model.BgImageUrl ?? "")');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        border: 1px solid black;
            ">



        <div id="content"
         style="
        width: @(Model.Width ?? "100vw");
        height: @(Model.Height ?? "100vh");
         ">
            @foreach (var comp in Model.Comps)
            {
                @Html.Raw(RenderComponent(comp))
            }

        </div>

        @*Errors*@

        <div id="connectionError" class="alert alert-danger mb-4" style="display: none;" role="alert">


            @ViewHelper.GetLanguage("wsError")
        </div>

        <div id="AuthError" class="alert alert-danger mb-4" style="display: none;" role="alert">
            @ViewHelper.GetLanguage("authError")
        </div>


        <div id="Errors" style="display:none; font-family: Arial, sans-serif;">
            <div id="divooo" style="text-align:center;">
                <img src="~/media/ooo2.png" />
                <div style="margin-top: 20px;">
                    <div id="Printer" style="display: inline-block; margin-right: 20px;">
                        <img src="~/media/printerError.png" style="width: 100px; height: auto;" />
                        <span id="PrinterStatus" style="display: block; font-weight: bold; margin-top: 10px;font-size: large;">Printer is disconnected</span>
                    </div>
                    <div id="Display" style="display: inline-block; margin-right: 20px;">
                        <img src="~/media/displayError.png" style="width: 100px; height: auto;" />
                        <span id="DisplayStatus" style="display: block; font-weight: bold; margin-top: 10px;font-size: large;">Display is disconnected</span>
                    </div>
                    <div id="Terminal" style="display: inline-block;">
                        <img src="~/media/terminalError.png" style="width: 100px; height: auto;" />
                        <span id="TerminalStatus" style="display: block; font-weight: bold; margin-top: 10px;font-size: large;">Terminal is disconnected</span>
                    </div>
                </div>
            </div>
        </div>



    </div>

}
@functions {
    public string RenderComponent(DesCompData comp)
    {
        switch (comp)
        {

            case DesCompDataGenericHtml htmlComp:
                return ViewHelper.RenderGenericHtmlComponent(htmlComp);
           


            default:
                return string.Empty; // Unknown component type
        }
    }
}


<script>
    var apiUrl = '@Configuration["APIBase"]';
    var kioskID = '@Configuration["KioskID"]';
</script>
